
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>View Squad</title>
  <style>
    :root {
      --accent-color: #a00000;
      --text-color: #fff;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f8;
      margin: 0;
      padding: 20px;
      text-align: center;
    }

    h1 {
      color: var(--accent-color);
      margin-bottom: 10px;
    }

    #formation {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin: 20px auto;
      max-width: 700px;
    }

    .row {
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .position {
      background: linear-gradient(to bottom, #fff, var(--accent-color));
      border-radius: 8px;
      min-width: 100px;
      min-height: 60px;
      padding: 5px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      color: var(--text-color);
      font-size: 14px;
    }

    .card {
      cursor: grab;
    }

    #subs {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      background: #222;
      padding: 15px;
      border-radius: 12px;
      color: #fff;
      margin-top: 30px;
    }

    button {
      background: var(--accent-color);
      color: #fff;
      border: none;
      padding: 10px 16px;
      font-size: 15px;
      border-radius: 6px;
      margin: 10px;
      cursor: pointer;
    }

    button:hover {
      background: #800000;
    }
  </style>
</head>
<body>
  <h1 id="club-name">Loading...</h1>

  <button id="toggleEdit">‚úèÔ∏è Change Lineup</button>
  <button onclick="saveLineup()">üíæ Save Lineup</button>

  <div id="formation">
    <div class="row forwards">
      <div class="position" id="LW" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
      <div class="position" id="ST" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
      <div class="position" id="RW" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div>
    <div class="row mids">
      <div class="position" id="LCM" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
      <div class="position" id="CM" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
      <div class="position" id="RCM" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div>
    <div class="row defense">
      <div class="position" id="LB" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
      <div class="position" id="LCB" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
      <div class="position" id="RCB" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
      <div class="position" id="RB" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div>
    <div class="row gk">
      <div class="position" id="GK" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div>
  </div>

  <h2>Substitutes</h2>
  <div id="subs"></div>

  <script>
    let editing = false;

    const lineup = {
      LW: { name: "Gabriel Martinelli", position: "LW", rating: 84 },
      ST: { name: "Gabriel Jesus", position: "ST", rating: 85 },
      RW: { name: "Bukayo Saka", position: "RW", rating: 86 },
      LCM: { name: "Declan Rice", position: "LCM", rating: 87 },
      CM: { name: "Martin √òdegaard", position: "CM", rating: 87 },
      RCM: { name: "Thomas Partey", position: "RCM", rating: 83 },
      LB: { name: "Oleksandr Zinchenko", position: "LB", rating: 80 },
      LCB: { name: "Gabriel Magalh√£es", position: "LCB", rating: 83 },
      RCB: { name: "William Saliba", position: "RCB", rating: 84 },
      RB: { name: "Ben White", position: "RB", rating: 81 },
      GK: { name: "David Raya", position: "GK", rating: 82 }
    };

    const subsList = [
      { name: "Aaron Ramsdale", position: "GK", rating: 81 },
      { name: "Jurrien Timber", position: "RB", rating: 79 },
      { name: "Takehiro Tomiyasu", position: "CB", rating: 80 },
      { name: "Jorginho", position: "CM", rating: 81 },
      { name: "Fabio Vieira", position: "CAM", rating: 77 },
      { name: "Leandro Trossard", position: "LW", rating: 82 },
      { name: "Eddie Nketiah", position: "ST", rating: 77 }
    ];

    function allowDrop(ev) {
      if (editing) ev.preventDefault();
    }

    function drag(ev) {
      ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
      ev.preventDefault();
      const draggedId = ev.dataTransfer.getData("text");
      const dragged = document.getElementById(draggedId);
      const target = ev.target.closest(".position");
      if (!dragged || !target || !editing) return;

      const [name, meta] = dragged.textContent.split("‚Ä¢");
      const rating = parseInt(meta.trim());
      const playerObj = {
        name: name.trim(),
        position: target.id,
        rating
      };

      // Remove from pitch
      if (draggedId.startsWith("player-")) {
        const from = draggedId.replace("player-", "");
        delete lineup[from];
      }

      // Remove from subs
      else if (draggedId.startsWith("sub-")) {
        const index = parseInt(draggedId.split("-")[1]);
        subsList.splice(index, 1);
      }

      // Push old player (if any) into subs
      if (lineup[target.id]) {
        subsList.push(lineup[target.id]);
      }

      // Assign new player to position
      lineup[target.id] = playerObj;
      renderAll();
    }

    function renderPlayer(player, position) {
      const slot = document.getElementById(position);
      slot.innerHTML = "";
      if (player) {
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `<strong>${player.name}</strong><br>${player.position} ‚Ä¢ ${player.rating}`;
        if (editing) {
          div.id = "player-" + position;
          div.draggable = true;
          div.ondragstart = drag;
        }
        slot.appendChild(div);
      }
    }

    function renderAll() {
      Object.keys(lineup).forEach(pos => renderPlayer(lineup[pos], pos));
      const subs = document.getElementById("subs");
      subs.innerHTML = "";
      subsList.forEach((p, i) => {
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `<strong>${p.name}</strong><br>${p.position} ‚Ä¢ ${p.rating}`;
        if (editing) {
          div.id = "sub-" + i;
          div.draggable = true;
          div.ondragstart = drag;
        }
        subs.appendChild(div);
      });
    }

    function saveLineup() {
      localStorage.setItem("customFormation", JSON.stringify(lineup));
      alert("‚úÖ Lineup saved!");
    }

    document.getElementById("toggleEdit").onclick = () => {
      editing = !editing;
      document.getElementById("toggleEdit").textContent = editing
        ? "‚úÖ Done Editing"
